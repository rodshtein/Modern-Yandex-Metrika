function l(n){let e={counters:{}};return n.forEach(r=>{if(typeof r=="number")e.counters[r]={id:r};else if(Array.isArray(r))m(r,e);else if(typeof r=="object")if("id"in r){let{name:t=r.id,...o}=r;t==null?e.err=="empty-id-error":e.counters[t]=o}else({dev:e.dev,src:e.src,delay:e.delay}=r),r.counters&&m(r.counters,e)}),e}function m(n,e){n.forEach(r=>{if(typeof r=="number"&&(e.counters[r]={id:r}),typeof r=="object"){let{name:t=r.id,...o}=r;t==null?e.err=="empty-id-error":e.counters[t]=o}})}function y(){return new Function("try { return this === window } catch(e) { return false }")()}function a(n,e){switch(n){case"empty-id-error":console.error(`Yandex Metrika - Init error 
\u{1F4A2} Can't recognition some ID's! Check options.`);break;case"hit-error":console.error(`Yandex Metrika - Hit error 
\u{1F4A2} Hit Run with some empty parameters: 
from: ${e.from} 
to: ${e.to} `);break;case"hit":console.info(`Yandex Metrika - info 
\u{1F91C} Hit:
from: ${e.from},
to: ${e.to} `);break;case"no-counters-error":console.error(`Yandex Metrika - Init error 
\u{1F4A2} Can't find any Counters!`);break;case"dev-mode":console.info(`Yandex Metrika - Init info 
\u{1F52E} Work in Dev mode without send any data`);break}}var w={yandex:"https://mc.yandex.ru/metrika/tag.js",cdn:"https://cdn.jsdelivr.net/npm/yandex-metrica-watch/tag.js"},M={trackLinks:!0,accurateTrackBounce:!0,clickmap:!1},s,c,u,i,d,p;async function I(...n){if(!(!y()||Object.keys(i).length)){if({dev:s=!1,src:c="yandex",delay:u=!0,counters:i={},err:d=!1}=l(n),s&&a("dev-mode"),d){a(d);return}return b(),Y(i),x(),{hint:(e,r)=>g(e,r),goal:(e,r=!1)=>j(e,r),params:(e,r=!1)=>v(e,r)}}}function b(){!window.ym||(window.ym=function(){(window.ym.a=window.ym.a||[]).push(arguments)},window.ym.l=1*new Date)}function Y(){for(let n in i){let{id:e,disable:r,...t}=i[n];r||(p=!0,window.ym(e,"init",Object.assign(M,t)))}}function x(){if(s)return;if(!p){a("no-counters-error");return}let n=document.createElement("script");n.async=!0,n.src=c=="yandex"?w.yandex:c=="cdn"?w.cdn:c,u>1?setTimeout(()=>{document.head.append(n)},u):u?window.onload=document.head.append(n):document.head.append(n)}function h(n,e){if(!s){if(!i.includes(e)){console.error(`[YMetrika][sendParams] The ${e} is not initiated`);return}n.apply(this,arguments)}}function g(n,e,r){if(!n||!e){a("hit-error",{from:n,to:e});return}if(s){a("hit",{from:n,to:e});return}if(r)window.ym(i[r].id,"hit",e,{referer:n});else for(let t in i)window.ym(i[t].id,"hit",e,{referer:n})}function j(n,e=!1){if(s)return;if(!i.length){console.error("[YMetrika][YMGoal] Metrika is not initiated");return}if(n===null||!n){console.error("[YMetrika][YMGoal] First argument must be an Object or String");return}let r,t,o,f;if(typeof r=="object"?{target:r,params:t,callback:o,ctx:f}=n:r=n,e){h(window.ym(e,"reachGoal",r,t,o,f),e);return}i.forEach(({id:k})=>{window.ym(k,"reachGoal",r,t,o,f)})}function v(n,e=!1){if(s)return;if(typeof n!="object"||n===null||!n){console.error("[YMetrika][YMParams] First argument must be an Object");return}if(!i.length){console.error("[YMetrika][YMParams] Metrika is not initiated");return}let{visitParams:r,goalParams:t}=n;if(r=r||n,e){h(window.ym(e,"params",r,t),e);return}i.forEach(({id:o})=>{window.ym(o,"params",n)})}export{j as YMGoal,g as YMHit,v as YMParams,Y as initCounters,I as initMetrika};
//! Made in Misha Rodstein, thanks for using ❤️ 
//! http://github.com/rodshtein/modern-yandex-metrika
